---
layout: vimdoc
helpname: 'terminal'
---
<div id='vimCodeElement'>
<a class="Constant" href="terminal.html" name="terminal.txt">terminal.txt</a>&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim version 8.0.</span>&nbsp;&nbsp;Last change: 2017 Jul 19<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Identifier">VIM REFERENCE MANUAL&nbsp;&nbsp;&nbsp;&nbsp;by Bram Moolenaar</span><br>
<br>
<br>
Terminal window support&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal" name="terminal">terminal</a><br>
<br>
<br>
WARNING: THIS IS ONLY PARTLY IMPLEMENTED, ANYTHING CAN STILL CHANGE<br>
<br>
The terminal feature is optional, use this to check if your Vim has it:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo has('terminal')</div>
If the result is &quot;1&quot; you have it.<br>
<br>
<br>
1. Basic use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-use">terminal-use</a><br>
2. Remote testing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-testing">terminal-testing</a><br>
3. Debugging&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-debug">terminal-debug</a><br>
<br>
<span class="Special">{Vi does not have any of these commands}</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
1. Basic use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-use" name="terminal-use">terminal-use</a><br>
<br>
This feature is for running a terminal emulator in a Vim window.&nbsp;&nbsp;A job can be<br>
started connected to the terminal emulator. For example, to run a shell:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp; :term bash</div>
<br>
Or to run a debugger:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp; :term gdb vim</div>
<br>
The job runs asynchronously from Vim, the window will be updated to show<br>
output from the job, also&nbsp;&nbsp;while editing in any other window.<br>
<br>
When the keyboard focus is in the terminal window, typed keys will be send to<br>
the job.&nbsp;&nbsp;This uses a pty when possible.<br>
<br>
Navigate between windows with&nbsp;<span class="Special">CTRL-W</span>&nbsp;commands (and mouse).<br>
E.g.&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-W</span>&nbsp;moves focus to the next window.<br>
Use &quot;<span class="Special">CTRL-W</span>&nbsp;:&quot; to edit an Ex command.<br>
<br>
See option&nbsp;<a class="Type" href="options.html#'termkey'">'termkey'</a>&nbsp;for specifying the key that precedes a Vim command.<br>
Default is&nbsp;<span class="Special">CTRL-W</span>.<br>
<br>
See option&nbsp;<a class="Type" href="options.html#'termsize'">'termsize'</a>&nbsp;for controlling the size of the terminal window.<br>
(TODO: scrolling when the terminal is larger than the window)<br>
<br>
<span class="PreProc">Syntax</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:ter" name=":ter">:ter</a>&nbsp;<a class="Constant" href="terminal.html#:terminal" name=":terminal">:terminal</a><br>
:terminal[!]&nbsp;<span class="Special">[command]</span>&nbsp;&nbsp;Open a new terminal window.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is provided run it as a job and connect<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the input and output to the terminal.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is not given the&nbsp;<a class="Type" href="options.html#'shell'">'shell'</a>&nbsp;option is used.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A new buffer will be created, using&nbsp;<span class="Special">[command]</span>&nbsp;or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'shell'">'shell'</a>&nbsp;as the name.&nbsp;&nbsp;If a buffer by this name already<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists a number is added in parenthesis.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E.g. if &quot;gdb&quot; exists the second terminal buffer will<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use &quot;gdb (1)&quot;.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The window can be closed, in which case the buffer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;becomes hidden.&nbsp;&nbsp;The command will not be stopped.&nbsp;&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="windows.html#:buffer">:buffer</a>&nbsp;command can be used to turn the current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window into a terminal window, using the existing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer.&nbsp;&nbsp;If there are unsaved changes this fails, use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;! to force, as usual.<br>
<br>
When the buffer associated with the terminal is wiped out the job is killed,<br>
similar to calling&nbsp;<span class="Comment">job_stop(job, &quot;kill&quot;)</span><br>
<br>
<br>
<span class="PreProc">Resizing</span><br>
<br>
The size of the terminal can be in one of three modes:<br>
<br>
1. The&nbsp;<a class="Type" href="options.html#'termsize'">'termsize'</a>&nbsp;option is empty: The terminal size follows the window size.<br>
&nbsp;&nbsp; The minimal size is 2 screen lines with 10 cells.<br>
<br>
2. The&nbsp;<a class="Type" href="options.html#'termsize'">'termsize'</a>&nbsp;option is &quot;rows*cols&quot;, where &quot;rows&quot; is the minimal number of<br>
&nbsp;&nbsp; screen rows and &quot;cols&quot; is the minial number of cells.<br>
<br>
3. The&nbsp;<a class="Type" href="options.html#'termsize'">'termsize'</a>&nbsp;option is &quot;rowsXcols&quot; (where the x is upper or lower case).<br>
&nbsp;&nbsp; The terminal size is fixed to the specified number of screen lines and<br>
&nbsp;&nbsp; cells.&nbsp;&nbsp;If the window is bigger there will be unused empty space.<br>
<br>
If the window is smaller than the terminal size, only part of the terminal can<br>
be seen (the lower-left part).<br>
<br>
The&nbsp;<a class="Identifier" href="eval.html#term_getsize()">term_getsize()</a>&nbsp;function can be used to get the current size of the<br>
terminal.&nbsp;&nbsp;<a class="Identifier" href="eval.html#term_setsize()">term_setsize()</a>&nbsp;can be used only when in the first or second mode,<br>
not when&nbsp;<a class="Type" href="options.html#'termsize'">'termsize'</a>&nbsp;is &quot;rowsXcols&quot;.<br>
<br>
<br>
<span class="PreProc">Unix</span><br>
<br>
On Unix a pty is used to make it possible to run all kinds of commands.&nbsp;&nbsp;You<br>
can even run Vim in the terminal!&nbsp;&nbsp;That's used for debugging, see below.<br>
<br>
<br>
<span class="PreProc">MS-Windows</span><br>
<br>
On MS-Windows a hidden console is used to run the command in.&nbsp;&nbsp;This should<br>
work well for all kind of commands.&nbsp;&nbsp;Obviously, they must be commands that run<br>
in a terminal, not open their own window.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
2. Remote testing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-testing" name="terminal-testing">terminal-testing</a><br>
<br>
Most Vim tests execute a script inside Vim.&nbsp;&nbsp;For some tests this does not<br>
work, running the test interferes with the code being tested.&nbsp;&nbsp;To avoid this<br>
Vim is executed in a terminal window.&nbsp;&nbsp;The test sends keystrokes to it and<br>
inspects the resulting screen state.<br>
<br>
<span class="PreProc">Functions</span><br>
<br>
term_sendkeys()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; send keystrokes to a terminal<br>
term_wait()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait for screen to be updated<br>
term_scrape()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inspect terminal screen<br>
<br>
<br>
<span class="PreProc">==============================================================================</span><br>
3. Debugging&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-debug" name="terminal-debug">terminal-debug</a><br>
<br>
The Terminal debugging plugin can be used to debug a program with gdb and view<br>
the source code in a Vim window. For example:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:TermDebug vim</div>
<br>
This opens three windows:<br>
- A terminal window in which &quot;gdb vim&quot; is executed.&nbsp;&nbsp;Here you can directly<br>
&nbsp;&nbsp;interact with gdb.<br>
- A terminal window for the executed program.&nbsp;&nbsp;When &quot;run&quot; is used in gdb the<br>
&nbsp;&nbsp;program I/O will happen in this window, so that it does not interfere with<br>
&nbsp;&nbsp;controlling gdb.<br>
- A normal Vim window used to show the source code.&nbsp;&nbsp;When gdb jumps to a<br>
&nbsp;&nbsp;source file location this window will display the code, if possible.&nbsp;&nbsp;Values<br>
&nbsp;&nbsp;of variables can be inspected, breakpoints set and cleared, etc.<br>
<br>
This uses two terminal windows.&nbsp;&nbsp;To open the gdb window:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:term gdb [arguments]</div>
To open the terminal to run the tested program&nbsp;<a class="Identifier" href="eval.html#term_open()">term_open()</a>&nbsp;is used.<br>
<br>
TODO<br>
<br>
<br>
&nbsp;vim:tw=78:ts=8:ft=help:norl:<br>
</div>
