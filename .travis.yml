language: go
go: 1.7.3
dist: trusty
sudo: false

env:
  global:
    - secure: BhnH98mFt5D4aEE8xyzpfIjkVYuEG52U28CVXT04ISskONHBek1xXtGdDS9kyOyJQqO68HrgFjKRx0U7LspAvU4X1JqsZ8hndEL5fdbq+00wwxN4wvXVHOevUwu4fl0nVX5NaFc4oHw1eAcDodqU6nhDzHTwiYBc/KUQ1S5DUkbovxhznZNRMOdnmGxIWYqWGeJx8CU+933UlVjWdRgd8zsaPBpWPZhRN17SnV5tXoyRNYMKSAWjSvM8EPkcQSo6IMIgO+0Brcw2Wu+4XedfkTMsn8r1PDwqTXPpfiAaGwtBuTd81bt86iDWXXyq4HiPWY0l7boHzdrFntXd3patHv6lI+AKS56ByXU50OP8BqYJEk8FgRKivPeJIDvvzARveWcMPyIVLaQMAeHWgRTcRVq2PfmX296jjaT/uzMCdO5YrdPKOi7hQS5oNYvxboCWQkCQInm5J+YudCEQGhjWkUGM8XXMxuGcDCck1U7mXOiQK49t3TfCgr0IhqOfeQ7bX1NERaVeiT4hIyDAHO+klsUVQ0l5eGzFUOMqrCgpry1EswSgEosGTtsLXNDjfembG5DBP7VGVq9VSQ5l6G0aUUfdmD5DAZy6QBTcjX9fR7HBKkXqxKIFZi9G1c32N+20VfI8pivVyQ8EQGeDhrGoM52tbq4elD9lPem+0Lxh3BM=
    - 'DEPLOY_BRANCH="master"'
    - 'DEPLOY_REPO_SLUG="vim-jp/vimdoc-en"'
    - 'DEPLOY_USER_NAME="vimdoc-en on travis-ci"'
    - 'DEPLOY_USER_EMAIL="vimdoc-en+travis-ci@vim-jp.org"'

script:
  - sh ./tools/install_sshkey_github.sh "$CI_KEY" ./tools/ci@vimdoc-en.vim-jp.org.enc ~/.ssh/ci@vimdoc-en.vim-jp.org
  - '[ "$TRAVIS_BRANCH" == "$DEPLOY_BRANCH" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ] && sh ./tools/deploy-gh-pages.sh _gh-pages'
